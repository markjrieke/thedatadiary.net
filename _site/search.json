[
  {
    "objectID": "posts/2021-01-17-r-ggplot2-plotly/index.html",
    "href": "posts/2021-01-17-r-ggplot2-plotly/index.html",
    "title": "R, ggplot2, & plotly",
    "section": "",
    "text": "Editor’s note: I’ve gone back & read my previous post, & have one general thought - yeeeesh… Everything is so… “matter of fact” in tone & doesn’t really sound like me. I’ll give myself a pass, since it was the first post, was written around midnight (which is very late for me!), and probably won’t ever be read by anyone besides me/my mom (hi mom!). That being said, I’m going to try to make a more conscious effort going forward of having my voice be expressed in my writing. This is my blog, after all, so it should sound like my voice when read back.\n\n\nPlotting in R\nI’ve started getting more familiar with R & wrangling my way through a few plotting examples (Youtube university is, once again, my best friend), but I thought it would be worthwhile to work towards plotting my own dataset. Luckily enough, plotting with R is pretty intuitive, once you get ahold of the basic syntax. I had put together a dataset on past US presidential elections for a separate personal project, and was able to convert to a .csv to use for some basic plotting practice.\nIt’s generally well understood that the Republican party has a structural advantage in presidential elections due to the winner-take-all nature of the electoral college, but I wanted to see if I could quantify this advantage in an understandable format using R. I used the ggplot2, dplyr, and plotly packages to put this together.\n\n\nPutting Together the Plot\nI imported the entire dataset and assigned it to a dataframe (R’s version of, say, an excel table). Using the base R plot() function, I plotted the entire dataframe:\n\nWithout specifying which variables I want to look at, plot() will output a set of summary plots, with every variable plotted against every other variable. This isn’t great for gathering any meaningful insight, but helps get a “lay of the land” view of the dataframe. In this case, I’m interested in how the percentage of the popular vote a candidate wins is related to the percentage of the electoral vote they win. Using plot(), I can graph popular_vote_pct and electoral_vote_pct variables from the dataframe:\n\nFigure 2 shows the basic data I want to represent, but there’s a lot of noise. The dataset includes every major candidate in every election since Washington’s run for re-election in 1788. I’m really only interested in the modern two-party system, so I filtered out the elections prior to 1952, as well as any candidate that won 0 electoral votes (i.e., third parties). The new, filtered plot is shown in Figure 3, below:\n\nNow, with all the data manipulation squared away, I can start with the fun part: making it look good! ggplot’s base plot is, right off the bat, just a bit nicer looking than base R’s plot() function:\n\nggplot color maps very easily, and with a little googling (aka - jumping through multiple color converters online to convert colors from hexadecimal to rgb to hcl), I was able to make some formatting changes that give the below static chart:\n\nDespite some frustrations (more on that, below), I was able to add a simple linear regression to the plot, with the shaded bands representing the 95% confidence interval for each regression. Since the Republican regression is above the Democratic regression, the chart implies that, for a given share of popular vote, Republican candidates on average win a larger share of the electoral college than their Democratic counterparts.\n\nThis finding matches the general consensus and my prior expectations, but I also found something mildly surprising. Ideally, I would imagine, we’d want a candidate’s share of the electoral vote to match their share of the popular vote. However, if I add a reference line of y = x, we can see that both parties tend to underperform in the electoral college when they lose the popular vote, but overperform in the electoral college when they win the popular vote!\n\nI plotted the absolute vote share from published election results, rather than the two-party vote share (2PV) (i.e., the percentage of vote won if only the top two candidates are considered). Converting to the 2PV would shift the plot to the right, but keep the same overall trend, as Democrats and Republicans have won 100% of the electoral college since 1952. This exercise was more about exploring R’s ggplot() function, so going back into the dataset to account for this marginal change doesn’t seem like an efficient use of time, but I did want to make a note of it, for transparency’s sake.\nFinally, I used the ggplotly() to convert from a static ggplot to an interactive plotly, and exported as an html file. For reasons I’ve yet to figure out, the custom textbox formatting did not want to play nice with the linear regression lines, so I had to take those out. I plan on figuring this wrinkle out eventually, but for now I’m happy with the final plot. You can hover over individual datapoints below to see more details!\n\nThis is an archive of a post previously hosted on Squarespace. You can view the original interactive content here.\n\n\n\nSome Notes\nI’ve published all of my work to github, and I’ll continue to do so in the future. The files I uploaded are, to say the least, in pretty rough shape. That being said, I don’t really plan on tweaking them for this post - I’ve used them as training tools, and it might be interesting in the future to look at the progress I’ve made.\nAlso, I just realized that the interactive plotly chart looks like junk when viewed via mobile (the data points and labels don’t resize automatically). I’ll have to figure out a way to fix this in the future… Maybe I can set the point size as a ratio of the plot width? It’s something to think about, but again, I’m happy with my first run using ggplot & plotly.\n\n\n\n\nReuseMITCitationBibTeX citation:@online{rieke2021,\n  author = {Mark Rieke},\n  title = {R, Ggplot2, \\& Plotly},\n  date = {2021-01-17},\n  url = {https://www.thedatadiary.net/posts/2021-01-17-r-ggplot2-plotly},\n  langid = {en}\n}\nFor attribution, please cite this work as:\nMark Rieke. 2021. “R, Ggplot2, & Plotly.” January 17,\n2021. https://www.thedatadiary.net/posts/2021-01-17-r-ggplot2-plotly."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "the data diary",
    "section": "",
    "text": "R, ggplot2, & plotly\n\n\n\narchive\n\n\n\n\n\n\n\nMark Rieke\n\n\nJan 17, 2021\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nBaby Steps\n\n\n\narchive\n\n\n\n\n\n\n\nMark Rieke\n\n\nJan 10, 2021\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nHello World!\n\n\n\narchive\n\n\n\n\n\n\n\nMark Rieke\n\n\nJan 9, 2021\n\n\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/2021-01-10-baby-steps/index.html",
    "href": "posts/2021-01-10-baby-steps/index.html",
    "title": "Baby Steps",
    "section": "",
    "text": "An Uphill Battle\nToday marks the beginning of what I imagine will be a long journey, with a significant number of hiccups & frustrations along the way. The end goal I have is to build out an election forecast model (in the spirit of FiveThirtyEight & The Economist), but along the way, I plan on getting better at a few things:\n\nWriting : while I’ve never been a poor writer, I’ve always gravitated more toward math & science, & in my career as an engineer, a good amount of my communication has been visual. If possible, I’ve always preferred to leave words off the page & have a chart speak for me. While I still think that, in general, its better the explain a concept visually (a picture vs. a thousand words, and all), I also believe supplementing a visual with my a well written analysis & opinion can improve its reception.\nStats : in my current job, almost everything I model is deterministic, rather than probabilistic (physical systems tend to behave the way that natural laws expect them to). It has been a long time since I’ve done any sort of stats work (& it was all basic introductory analyses), so I expect an uphill battle with getting my head wrapped around Bayes’ Theorem, Monte Carlo simulations, Brier’s Tests, etc.\nCoding : most of my experience in coding is with VBA - typically just for manipulating data in Excel. I’ve built out a good number of forms using VBA, but don’t typically tend to dig into anything far beyond simple manipulation. The front end of Excel is effectively setup as a visual programming tool, so there’s not a great incentive to do much array manipulation outside of the spreadsheet. Excel is a wonderful tool, & is sufficient for my current job, but I’ve definitely found where its limits lie. I’m excited to dig into R, the stats based program that seems almost to be designed specifically for what I’d like to do.\n\n\n\nThe First Plot\nR has a few sample datasets, and r:base includes a pretty basic plot function. With the sample set, cars, I made a quick plot of the stopping distance vs. the speed.\n\nplot(cars)\n\n\n\n\n\n\n\n\nReuseMITCitationBibTeX citation:@online{rieke2021,\n  author = {Mark Rieke},\n  title = {Baby {Steps}},\n  date = {2021-01-10},\n  url = {https://www.thedatadiary.net/posts/2021-01-10-baby-steps},\n  langid = {en}\n}\nFor attribution, please cite this work as:\nMark Rieke. 2021. “Baby Steps.” January 10, 2021. https://www.thedatadiary.net/posts/2021-01-10-baby-steps."
  },
  {
    "objectID": "posts/2021-01-09-hello-world/index.html",
    "href": "posts/2021-01-09-hello-world/index.html",
    "title": "Hello World!",
    "section": "",
    "text": "I’m currently setting up the website & will have an official post soon(ish).\n\n\n\nReuseMITCitationBibTeX citation:@online{rieke2021,\n  author = {Mark Rieke},\n  title = {Hello {World!}},\n  date = {2021-01-09},\n  url = {https://www.thedatadiary.net/posts/2021-01-09-hello-world},\n  langid = {en}\n}\nFor attribution, please cite this work as:\nMark Rieke. 2021. “Hello World!” January 9, 2021. https://www.thedatadiary.net/posts/2021-01-09-hello-world."
  }
]