<!DOCTYPE html>
<html lang="en-us">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academia 4.3.1">
  <meta name="generator" content="Hugo 0.88.1" />

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Mark Rieke">

  
  
  
    
  
  <meta name="description" content="Hierarchical HospitalsIf the past year of working at a large hospital system has taught me one thing, it’s that hospitals are a Russian nesting doll of structure. Within the hospital system, there are several campuses.">

  
  <link rel="alternate" hreflang="en-us" href="https://www.thedatadiary.net/blog/2022-11-14-hierarchical-hospitals/">

  


  

  
  
  
  <meta name="theme-color" content="#fc6f5c">
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.0/css/all.css" integrity="sha384-aOkxzJ5uQz7WBObEZcHvV5JvRW3TUc2rNPA7pe3AwnsUohiw1Vj2Rgx2KSOkF5+h" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.2.0/leaflet.css" integrity="sha512-M2wvCLH6DSRazYeZRIm1JnYyh22purTM+FDB5CsyxtQJYeKq83arPe5wgbNmcFXGqiSH2XR8dT/fJISVA1r/zQ==" crossorigin="anonymous">
    

    

  

  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Open+Sans|Roboto+Mono&display=swap">
  

  
  
  
  <link rel="stylesheet" href="/css/academia.min.84fde4bbd64cc9b4e40ee4ad0a0d9576.css">

  

  
  
  
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'G-QM3KW2TS7Q', 'auto');
      
      ga('require', 'eventTracker');
      ga('require', 'outboundLinkTracker');
      ga('require', 'urlChangeTracker');
      ga('send', 'pageview');
    </script>
    <script async src="//www.google-analytics.com/analytics.js"></script>
    
    <script async src="https://cdnjs.cloudflare.com/ajax/libs/autotrack/2.4.1/autotrack.js" integrity="sha512-HUmooslVKj4m6OBu0OgzjXXr+QuFYy/k7eLI5jdeEy/F4RSgMn6XRWRGkFi5IFaFgy7uFTkegp3Z0XnJf3Jq+g==" crossorigin="anonymous"></script>
    
  
  

  

  <link rel="manifest" href="/site.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="https://www.thedatadiary.net/blog/2022-11-14-hierarchical-hospitals/">

  
  
  
  
    
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@markjrieke">
  <meta property="twitter:creator" content="@markjrieke">
  
  <meta property="og:site_name" content="the data diary">
  <meta property="og:url" content="https://www.thedatadiary.net/blog/2022-11-14-hierarchical-hospitals/">
  <meta property="og:title" content="Hierarchical Hospitals | the data diary">
  <meta property="og:description" content="Hierarchical HospitalsIf the past year of working at a large hospital system has taught me one thing, it’s that hospitals are a Russian nesting doll of structure. Within the hospital system, there are several campuses."><meta property="og:image" content="https://www.thedatadiary.net/blog/2022-11-14-hierarchical-hospitals/featured.png">
  <meta property="twitter:image" content="https://www.thedatadiary.net/blog/2022-11-14-hierarchical-hospitals/featured.png"><meta property="og:locale" content="en-us">
  
  <meta property="article:published_time" content="2022-11-14T00:00:00&#43;00:00">
  
  <meta property="article:modified_time" content="2022-11-14T18:08:50-06:00">
  

  


  





  <title>Hierarchical Hospitals | the data diary</title>

</head>


<body id="top" data-spy="scroll" data-target="#TableOfContents" data-offset="71" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  
<nav class="navbar navbar-light fixed-top navbar-expand-lg py-0" id="navbar-main">
  <div class="container">

    
      <a class="navbar-brand" href="/">the data diary</a>
      
      <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation"><span><i class="fas fa-bars"></i></span>
      </button>
      

    
    <div class="collapse navbar-collapse" id="navbar">
      
      
      <ul class="navbar-nav ml-auto">
        

        
        <li class="nav-item dropdown">
          <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>2022 Midterm Forecast</span><span class="caret"></span>
          </a>
          <ul class="dropdown-menu">
            
            <li class="dropdown-item my-0 py-0 mx-0 px-0">
              <a href="/senate"><span>Senate</span></a>
            </li>
            
            <li class="dropdown-item my-0 py-0 mx-0 px-0">
              <a href="/house"><span>House</span></a>
            </li>
            
            <li class="dropdown-item my-0 py-0 mx-0 px-0">
              <a href="/governor"><span>Governor</span></a>
            </li>
            
          </ul>
        </li>

        
        

        

        
        
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link  active" href="/blog"><span>Blog</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/about"><span>About</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/resume"><span>Resume</span></a>
        </li>

        
        

      

        

        

        

        
        <li class="nav-item">
          <a class="nav-link js-dark-toggle" href="#"><i class="fas fa-moon" aria-hidden="true"></i></a>
        </li>
        

      </ul>
    </div>
  </div>
</nav>


  <article class="article py-5" itemscope itemtype="http://schema.org/Article">

  













<div class="container split-header">
  <div class="row justify-content-center">
    <div class="col-lg-8">
        <img class="img-fluid w-100" src="/blog/2022-11-14-hierarchical-hospitals/featured_hueeca1d7af9a752d90b745fa41f546b1e_623441_680x500_fill_q90_lanczos_smart1_3.png" itemprop="image" alt="">
        
    </div>
    <div class="col-lg-8">
      <h1 itemprop="name">Hierarchical Hospitals</h1>

      
      <p class="page-subtitle">Multilevel Models for Patient Satisfaction</p>
      

      



<meta content="2022-11-14 00:00:00 &#43;0000 UTC" itemprop="datePublished">
<meta content="2022-11-14 18:08:50 -0600 CST" itemprop="dateModified">

<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
          Last updated on
      
    
    <time>Nov 14, 2022</time>
  </span>
  

  

  

  
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder"></i>
    <a href="/categories/rstats/">rstats</a>, <a href="/categories/stan/">stan</a>, <a href="/categories/healthcare/">healthcare</a></span>
  

  
    
<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=https://www.thedatadiary.net/blog/2022-11-14-hierarchical-hospitals/&amp;text=Hierarchical%20Hospitals" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https://www.thedatadiary.net/blog/2022-11-14-hierarchical-hospitals/&amp;t=Hierarchical%20Hospitals" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook-f"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=Hierarchical%20Hospitals&amp;body=https://www.thedatadiary.net/blog/2022-11-14-hierarchical-hospitals/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=https://www.thedatadiary.net/blog/2022-11-14-hierarchical-hospitals/&amp;title=Hierarchical%20Hospitals" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://web.whatsapp.com/send?text=Hierarchical%20Hospitals%20https://www.thedatadiary.net/blog/2022-11-14-hierarchical-hospitals/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=https://www.thedatadiary.net/blog/2022-11-14-hierarchical-hospitals/&amp;title=Hierarchical%20Hospitals" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>


  

</div>

      














    </div>
    
    </div>
  </div>
</div>

  <div class="article-container">

    <div class="article-style" itemprop="articleBody">
      


<div id="hierarchical-hospitals" class="section level2">
<h2>Hierarchical Hospitals</h2>
<p>If the past year of working at a large hospital system has taught me one thing, it’s that hospitals are a Russian nesting doll of structure. Within the hospital system, there are several campuses. Within each campus, there are several service areas (inpatient, outpatient, emergency, day surgery, etc.). And finally, within each service area at each campus, there can be many individual hospital units.</p>
<p>Having worked with patient satisfaction data, I know that each of these levels contains useful information that may be beneficial to include in a model. Hospital A, for example, tends to receive better reviews than Hospital B, but within Hospital A the labor &amp; delivery unit tends to receive better reviews than the intensive care unit. Including every single unit as a categorical predictor isn’t a great modeling choice, since information about each unit remains separate (<em>no pooling</em>). On the other hand, ignoring the nested structure lumps all data points together (<em>complete pooling</em>), implicitly making the assumption that the data is independent, which can generate misleading predictions!</p>
<p>This is where hierarchical models come into play! Hierarchical models offer a happy middle ground and allow for <em>partial pooling</em> of information between groups. This approach allows for information to be shared across groups while still treating each group as unique (this is a pretty simplistic summary of hierarchical models; for a more detailed introduction, see <a href="https://www.bayesrulesbook.com/chapter-15.html">Chapter 15 of Bayes Rules!</a>).</p>
<p>While there are <a href="https://github.com/lme4/lme4/">non-Bayesian approaches</a> to hierarchical models, they mesh well with a Bayesian framework, so in this post I’ll build a Bayesian model to predict satisfaction scores based on simulated hospital data.</p>
</div>
<div id="simulating-hospital-data" class="section level2">
<h2>Simulating Hospital Data</h2>
<p>I can’t share live data, so I’ll need to simulate some fake data for this example. Let’s start with five hospitals, each with different baseline levels of satisfaction.</p>
<pre class="r"><code>library(tidyverse)
library(rstanarm)
library(tidybayes)
library(ggdist)
library(tidytext)

# reproducibility!
set.seed(54321)

# manually assign hospital-level intercept
hospital_prob &lt;- 
  tibble(hospital = paste(&quot;Hospital&quot;, seq(1:5)),
         hospital_prob = seq(from = 0.6, to = 0.8, length.out = 5) ,
         hospital_sigma = rep(0.2, 5))

hospital_prob %&gt;%
  knitr::kable()</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">hospital</th>
<th align="right">hospital_prob</th>
<th align="right">hospital_sigma</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Hospital 1</td>
<td align="right">0.60</td>
<td align="right">0.2</td>
</tr>
<tr class="even">
<td align="left">Hospital 2</td>
<td align="right">0.65</td>
<td align="right">0.2</td>
</tr>
<tr class="odd">
<td align="left">Hospital 3</td>
<td align="right">0.70</td>
<td align="right">0.2</td>
</tr>
<tr class="even">
<td align="left">Hospital 4</td>
<td align="right">0.75</td>
<td align="right">0.2</td>
</tr>
<tr class="odd">
<td align="left">Hospital 5</td>
<td align="right">0.80</td>
<td align="right">0.2</td>
</tr>
</tbody>
</table>
<p>In this example, Hospital 1 will tend to have the lowest scores while Hospital 5 will tend to have the highest scores. Within each hospital, we want individual unit-level scores to be able to vary randomly.</p>
<pre class="r"><code># simulate 5 hospitals within the system, each with 100 units (500 total)
satisfaction &lt;- 
  tibble(hospital = rep(paste(&quot;Hospital&quot;, seq(1:5)), 100)) %&gt;%
  arrange(hospital) %&gt;%
  
  # add in the units at each hospital
  bind_cols(unit = rep(paste(&quot;Unit&quot;, seq(1:100)), 5)) %&gt;%
  mutate(unit = paste(hospital, unit)) %&gt;%
  
  # add in the hospital-level intercept
  left_join(hospital_prob, by = &quot;hospital&quot;) %&gt;%
  
  # estimate a unit-level intercept 
  rowwise() %&gt;%
  mutate(unit_offset = rnorm(1, 0, 0.05),
         unit_prob = gamlss.dist::rBE(1, hospital_prob + unit_offset, hospital_sigma)) %&gt;%
  select(hospital, unit, unit_prob) %&gt;%
  
  # generate fake responses
  mutate(n = round(rlnorm(1, log(100), 1.5)),
         topbox = rbinom(1, n, unit_prob)) %&gt;%
  ungroup() %&gt;%
  select(-unit_prob)

# display example at each hospital
set.seed(333)
satisfaction %&gt;%
  group_by(hospital) %&gt;%
  slice_sample(n = 1) %&gt;%
  mutate(score = topbox/n) %&gt;%
  knitr::kable()</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">hospital</th>
<th align="left">unit</th>
<th align="right">n</th>
<th align="right">topbox</th>
<th align="right">score</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Hospital 1</td>
<td align="left">Hospital 1 Unit 14</td>
<td align="right">35</td>
<td align="right">21</td>
<td align="right">0.6000000</td>
</tr>
<tr class="even">
<td align="left">Hospital 2</td>
<td align="left">Hospital 2 Unit 41</td>
<td align="right">137</td>
<td align="right">107</td>
<td align="right">0.7810219</td>
</tr>
<tr class="odd">
<td align="left">Hospital 3</td>
<td align="left">Hospital 3 Unit 55</td>
<td align="right">298</td>
<td align="right">252</td>
<td align="right">0.8456376</td>
</tr>
<tr class="even">
<td align="left">Hospital 4</td>
<td align="left">Hospital 4 Unit 66</td>
<td align="right">12</td>
<td align="right">7</td>
<td align="right">0.5833333</td>
</tr>
<tr class="odd">
<td align="left">Hospital 5</td>
<td align="left">Hospital 5 Unit 39</td>
<td align="right">211</td>
<td align="right">169</td>
<td align="right">0.8009479</td>
</tr>
</tbody>
</table>
<p>This unit level variation is important! Even though units within certain hospitals tend to perform worse than units in others, individual units at lower-rated hospitals can still outperform units at highly-rated hospitals! An easier way to see both the hospital-level and unit-level variation is to place all on the same plot.</p>
<pre class="r"><code>satisfaction %&gt;%
  mutate(score = topbox/n) %&gt;%
  ggplot(aes(x = hospital,
             y = score,
             size = n,
             color = hospital)) + 
  geom_boxplot() + 
  geom_jitter(alpha = 0.25) + 
  coord_flip() +
  scale_color_brewer(palette = &quot;Dark2&quot;) +
  scale_size_continuous(range = c(1, 15)) +
  scale_y_continuous(labels = scales::label_percent()) +
  theme(legend.position = &quot;none&quot;) +
  labs(title = &quot;It&#39;s in the way that you Units&quot;,
       subtitle = &quot;Satisfaction scores vary both **across** and **within** hospitals&quot;,
       x = NULL,
       y = NULL)</code></pre>
<p><img src="https://www.thedatadiary.net/blog/2022-11-14-hierarchical-hospitals/index_files/figure-html/unnamed-chunk-2-1.png" width="4500" /></p>
<p>Here, each point represents an individual unit within a hospital — larger points indicate units with more responses. There’s clearly variation <em>across</em> hospitals, but also variation <em>within</em> each hospital. We can generally trust that the satisfaction score for a unit with lots of responses is accurate, but a unit with few responses can provide misleading scores — some have scores of 100%! I don’t think that these units are actually perfect, it’s likelier that they got lucky.</p>
<p>A hierarchical model will allow us to pool all this information together — when a unit has lots of responses, the model’s estimate of their true score will land pretty close to their raw score. When a unit only has a few responses, however, the model will shrink the estimate of their true score towards the hospital group-level average.</p>
</div>
<div id="fitting-a-model" class="section level2">
<h2>Fitting a Model</h2>
<p>I’ve found recently that writing out a model specification helps, so let’s write out the model and priors.</p>
<p><span class="math display">\[
\begin{gather}
y_{unit} \sim Binomial(\pi_{unit}, n_{unit}) \\
logit(\pi_{unit}) = \mu + \beta_{hospital} + \beta_{unit} \\
\mu \sim Normal(0, 2) \\
\beta_{hospital} \sim Normal(0, 2) \\
\beta_{unit} \sim Normal(0, 2)
\end{gather}
\]</span></p>
<p>In this case, the number of topbox responses at each unit, <span class="math inline">\(y_{unit}\)</span>, is estimated with a binomial distribution where each patient within that visits the unit has a probability <span class="math inline">\(\pi_{unit}\)</span> of selecting the topbox response. <span class="math inline">\(\pi_{unit}\)</span> is allowed to vary from the global mean, <span class="math inline">\(\mu\)</span>, both by hospital (<span class="math inline">\(\beta_{hospital}\)</span>) and by unit (<span class="math inline">\(\beta_{unit}\)</span>). This can be implemented in <a href="https://mc-stan.org/">Stan</a> via the <a href="https://mc-stan.org/rstanarm/index.html"><code>{rstanarm}</code></a> package.</p>
<pre class="r"><code># run chains on separte cores
options(mc.cores = parallel::detectCores())

# fit a bayesian model!
satisfaction_model &lt;- 
  stan_glmer(
    cbind(topbox, n - topbox) ~ (1 | hospital) + (1 | unit),
    data = satisfaction,
    family = binomial(),
    prior_intercept = normal(0, 2, autoscale = TRUE),
    prior = normal(0, 2, autoscale = TRUE),
    prior_covariance = decov(regularization = 1, concentration = 1, shape = 1, scale = 1),
    chains = 4,
    iter = 2000,
    seed = 999
  )</code></pre>
<p>This model gives us <em>exactly what we were looking for</em> — units with many responses have posterior estimations of <span class="math inline">\(\pi_{unit}\)</span> that are close to the raw score and have relatively small credible intervals, while the posterior estimate of <span class="math inline">\(\pi_{unit}\)</span> for a unit with few responses is shrunken towards the hospital average with relatively wide credible intervals.</p>
<pre class="r"><code>set.seed(88)
satisfaction %&gt;%
  
  # draw 1000 posterior predictions of pi for each unit
  tidybayes::add_epred_draws(satisfaction_model, ndraws = 1000) %&gt;%
  ungroup() %&gt;%
  
  # select a sample of 3 random units from each hospital to plot
  nest(preds = -c(hospital, unit, n, topbox)) %&gt;%
  group_by(hospital) %&gt;%
  slice_sample(n = 3) %&gt;%
  mutate(unit = str_sub(unit, start = 12),
         unit = glue::glue(&quot;{unit}\n(n = {scales::label_comma()(n)})&quot;),
         med_pred = map_dbl(preds, ~quantile(.x$.epred, probs = 0.5))) %&gt;%
  ungroup() %&gt;%
  unnest(preds) %&gt;%
  
  # plot!
  ggplot(aes(x = reorder_within(unit, med_pred, hospital),
             y = .epred,
             color = hospital)) +
  stat_pointinterval() +
  scale_x_reordered() +
  scale_y_continuous(labels = scales::label_percent()) +
  coord_flip() +
  facet_wrap(~hospital, scales = &quot;free&quot;) +
  theme(legend.position = &quot;none&quot;) +
  labs(title = &quot;\u03C0 in the sky&quot;,
       subtitle = &quot;Posterior estimations of \u03C0 for a random sampling of units&quot;, 
       x = NULL,
       y = NULL,
       caption = &quot;Pointrange indicates the&lt;br&gt;66% &amp; 95% posterior credible interval&quot;) +
  scale_color_brewer(palette = &quot;Dark2&quot;)</code></pre>
<p><img src="https://www.thedatadiary.net/blog/2022-11-14-hierarchical-hospitals/index_files/figure-html/explore%20fit-1.png" width="4500" /></p>
<p>With a hierarchical model, we can even make predictions for new units that didn’t appear in the original training data. If we were to introduce a new unit at each hospital, the model can still rely on the hospital-level term to estimate scores.</p>
<pre class="r"><code>set.seed(1)
tibble(hospital = paste(&quot;Hospital&quot;, seq(1:5))) %&gt;%
  mutate(unit = glue::glue(&quot;{hospital}\nNew Unit&quot;)) %&gt;%
  add_epred_draws(satisfaction_model) %&gt;%
  ggplot(aes(x = unit,
             y = .epred,
             color = unit)) + 
  stat_pointinterval() +
  scale_y_continuous(labels = scales::label_percent()) +
  coord_flip() +
  scale_color_brewer(palette = &quot;Dark2&quot;) +
  theme(legend.position = &quot;none&quot;) +
  labs(title = &quot;New unit, who this?&quot;,
       subtitle = &quot;Posterior estimations of \u03C0 for hypothetical new units at each hospital&quot;,
       x = NULL,
       y = NULL,
       caption = &quot;Pointrange indicates the&lt;br&gt;66% and 95% posterior credible interval&quot;)</code></pre>
<p><img src="https://www.thedatadiary.net/blog/2022-11-14-hierarchical-hospitals/index_files/figure-html/predicting%20for%20a%20new%20unit-1.png" width="4500" /></p>
</div>
<div id="some-closing-thoughts" class="section level2">
<h2>Some closing thoughts</h2>
<p>The model I used here can be referred to as a <em>random intercept</em> model. In this case, the intercept is allowed to vary by hospital and unit. Had I included a predictor term — age, for example — I could have put together a <em>random slope</em> model, which would have allowed the age term to also vary by hospital and unit. This would allow for one hospital to be modeled as having better scores for young patients while another hospital could see better scores for older patients. This sort of flexibility is useful, but in my experience, simply accounting for the hierarchical structure of the data with an intercept-only model gets you 90% of where you need to go!</p>
</div>

    </div>

    



    
      








  





  
  
  
    
  
  
  <div class="media author-card" itemscope itemtype="http://schema.org/Person">
    
      
      <img class="portrait mr-3" src="/authors/admin/avatar_hu566f88036a32ad6519e34d2b60700d41_471828_250x250_fill_q90_lanczos_center.jpg" itemprop="image" alt="Avatar">
    

    <div class="media-body">
      <h5 class="card-title" itemprop="name"><a href="https://www.thedatadiary.net/">Mark Rieke</a></h5>
      <h6 class="card-subtitle">Senior CX Analyst</h6>
      <p class="card-text" itemprop="description">I&rsquo;m a mechanical engineer by education, data analyst by practice. I love machine learning and communicating complex topics clearly with simple and beautiful charts.</p>
      <ul class="network-icon" aria-hidden="true">
        
          
          
          
            
          
          
          
          
          
            
          
          <li>
            <a itemprop="sameAs" href="https://twitter.com/markjrieke" target="_blank" rel="noopener">
              <i class="fab fa-twitter"></i>
            </a>
          </li>
        
          
          
          
            
          
          
          
          
          
            
          
          <li>
            <a itemprop="sameAs" href="https://github.com/markjrieke" target="_blank" rel="noopener">
              <i class="fab fa-github"></i>
            </a>
          </li>
        
          
          
          
            
          
          
          
          
          
            
          
          <li>
            <a itemprop="sameAs" href="https://stackoverflow.com/users/16307782/mark-rieke" target="_blank" rel="noopener">
              <i class="fab fa-stack-overflow"></i>
            </a>
          </li>
        
          
          
          
            
          
          
          
          
          
            
          
          <li>
            <a itemprop="sameAs" href="https://www.linkedin.com/in/mark-rieke-ab4b0ab4/" target="_blank" rel="noopener">
              <i class="fab fa-linkedin"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>



      
      
    

    

    


  </div>
</article>

      

    
    
    
    <script src="/js/mathjax-config.js"></script>
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js" integrity="sha256-aYTdUrn6Ow1DDgh5JTc3aDGnnju48y/1c8s1dgkYPQ8=" crossorigin="anonymous"></script>
        
      

      
      
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS_CHTML-full" integrity="sha256-GhM+5JHb6QUzOQPXSJLEWP7R73CbkisjzK5Eyij4U9w=" crossorigin="anonymous" async></script>
      
    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.2.0/leaflet.js" integrity="sha512-lInM/apFSqyy1o6s89K4iQUKg6ppXEgsVxT35HbzUupEVRh2Eu9Wdl4tHj7dZO0s1uvplcYGmt3498TtHq+log==" crossorigin="anonymous"></script>
    

    
    
    

    
    
    <script>hljs.initHighlightingOnLoad();</script>
    

    

    
    

    

    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    <script src="/js/academia.min.e40e230d9b3dfeac86994156b6388764.js"></script>

    






  
  <div class="container">
    <footer class="site-footer">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-6 mb-4 mb-md-0">
        
        <p class="mb-0">
          © Mark Rieke 2022 &middot; 
          Powered by
          <a href="https://gethugothemes.com" target="_blank" rel="noopener">Gethugothemes</a>
        </p>
      </div>
      <div class="col-md-6">
        <ul class="list-inline network-icon text-right mb-0">
          
          
          
          
          
          
          
          
          
          
          
          
          
          <li class="list-inline-item">
            <a href="https://twitter.com/markjrieke" target="_blank" rel="noopener" title="Follow me on twitter!"><i class="fab fa-twitter" aria-hidden="true"></i></a>
          </li>
          
          
          
          
          
          
          
          
          
          
          
          
          <li class="list-inline-item">
            <a href="https://github.com/markjrieke" target="_blank" rel="noopener" title="Find my work on GitHub!"><i class="fab fa-github" aria-hidden="true"></i></a>
          </li>
          
          
          
          
          
          
          
          
          
          
          
          
          <li class="list-inline-item">
            <a href="https://stackoverflow.com/users/16307782/mark-rieke" target="_blank" rel="noopener" title="Help me out on Stack Overflow!"><i class="fab fa-stack-overflow" aria-hidden="true"></i></a>
          </li>
          
          
          
          
          
          
          
          
          
          
          
          
          <li class="list-inline-item">
            <a href="https://www.linkedin.com/in/mark-rieke-ab4b0ab4/" target="_blank" rel="noopener" title="Connect with me on LinkedIn!"><i class="fab fa-linkedin" aria-hidden="true"></i></a>
          </li>
          
        </ul>
      </div>
    </div>
  </div>
</footer>
  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
